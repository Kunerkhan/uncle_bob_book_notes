# Тесты.

Тесты должны быть. Тесты позволяют спать спокойнее, особенно по ночам.

## Важность тестов
Многие разработчики считают, что тесты избыточны. Потому что написание тестов отнимает время.
И считают, что могут писать на 100% работающий код с первого раза.
Но это все миф.

Разработчик почти никогда не напишет идеальный код с первого раза. 
Требования будут меняться, а значит и код. 
Наличие тестов помогает разработчику убедиться в работоспособности системы после внесения изменений.

Тесты также это документация к коду.
Спустя время вам легче будет вспомнить, как работает код. И новому сотруднику позволит быстрее влиться в проект.

## Определение требований
Клиент описывает требования со стороны бизнеса. 
Разработчик пишет код по тому, как они поняли требования.
Поэтому увидев результат клиент понимает, что хотел не этого.
Как уменьшить ошибки недопонимания?

## Приемочные тесты
Клиент пишет тесты для пользователей. Учитываются только положительные сценарии.
Программист пишет тесты для программистов. 
А тестировщик пишет тесты проверяя наихудшие сценарии, чтобы выявить несоответствия требованиям.
И когда все участники участвуют вероятность ошибки снижается.

Разработка проекта - итеративный процесс.
Требования будут становиться яснее после каждой поставки кода.
И команда контроля качества(QA) должны вносить эти изменения своевременно.
Приемочные тесты должны быть описаны до начала разработки.

## Что такое “выполнено”?
Но перед написанием самих тестов нужно определить само значение готовности задачи. 
И эффективнее это делается, когда в команде есть тестировщик. 
Во время обсуждения  с тестировщиком можно точнее определить сценарии при которых задача будет считаться выполненной.

## Разработчик против тестировщика
Разработчик и тестировщик не враги!
Работая вместе можно выстроить максимально надежную систему.

## Состав тестов и процент покрытия
Для каждого уровня приложения пишутся разные тесты: 
 • Модульные(~100%)
 • Компонентные(~50%)
 • Интеграционные(~20%)
 • Системные(~10%), 
 • Исследовательские(~5%)
В книге старая версия пирамиды. Модульные и компонентные тесты по сути одно и тоже.
И тесты должны выполняться в таком же порядке, как в списке.

## Методы тестирования
 • *Черный ящик* - когда тестируется только поведение системы.  Пользователь/Тестировщик.
 • *Белый ящик* - когда тестируется поведение и реализация. Разработчик.
 • *Серый ящик* - когда  тестируется поведение со знанием того, как реализован функционал.

## Модульные тесты/Компонентные тесты
Документация к коду.
Все части системы тестируются независимо друг от друга(функции, классы).
Бизнес-логика и просто функции тестируются здесь.
Должны выполняться быстро (См. принципы FIRST).

*Метод тестирования - белая коробка.*

## Интеграционные тесты
Тестируют взаимодействие  компонентов системы друг с другом.

*Метод тестирования: белый и черный ящик или серый ящик.*

## Системные тесты
Весь код тестируется как готовый проект. Здесь проверяются соответствия требованиям.
Проводится *функциональное* и *нефункциональное* тестирование.

***Функциональное*** - проверка того, что код работает, так как ожидается. Соответствует требованиям.
***Нефункциональное*** - проверка UX/UI, производительности, безопасности, надежности, совместимости и т. д.

*Метод тестирования: черный ящик.*

## Исследовательские тесты
Цель проверить ожидаемое и “странное” поведение системы.
Странное поведение - неожиданное поведение, которое выявляется за счет креативности пользователя.
Нужно тестировать с желанием сломать систему. Можно “издеваться” как угодно.
Эти тесты никак не прописываются. 
И выполняются вручную.

## Как часто должны выполняться тесты?
Модульные тесты должны выполняться каждого внесения изменений.
Интеграционные тесты занимают больше времени, поэтому интервал определяется командой.
Системные тесты зависят от продолжительности их выполнения. Но, чем чаще, тем лучше.

И важно автоматизировать тестирование на каждом этапе!
Потому что ручное тестирование требует больше времени и стоит дороже.

## Полезные ссылки:
 - [FIRST](http://sergeyteplyakov.blogspot.com/2010/06/first-principles.html)
 - [Про ящики](https://quality-lab.ru/blog/key-principles-of-gray-box-testing/)
 - [Пирамида тестирования](https://habr.com/ru/post/672484/)
 - [Про тесты в целом](https://habr.com/ru/post/549054/)

## Дальше
[СЛЕД ГЛАВА -> РАБОТА В КОМАНДЕ](https://github.com/Kunerkhan/clean_code_notes/blob/master/%D0%98%D0%B4%D0%B5%D0%B0%D0%BB%D1%8C%D0%BD%D1%8B%D0%B9_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%81%D1%82/%D0%A0%D0%B0%D0%B1%D0%BE%D1%82%D0%B0_%D0%B2_%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B5.md)
